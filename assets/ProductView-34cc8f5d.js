import{_ as V,aC as w,Y as x,Z as S,ai as C,x as F,aB as k,a2 as q,a3 as B,c as a,a5 as s,aD as E,V as P,ae as r,az as I,a7 as i,ac as u,aA as j,K as d,aa as m,av as M,aw as N}from"./index-d5a1af0c.js";import{c as $,d as z,u as A,b as D}from"./index.esm-a79ea56f.js";import{V as R}from"./VContainer-af356a2e.js";import{V as T,a as p}from"./VRow-496d1112.js";import{V as U}from"./VForm-8e74fe9e.js";import"./_commonjsHelpers-39b5b250.js";/* empty css              */const K=l=>(M("data-v-31aeaef1"),l=l(),N(),l),O={style:{background:"#ECEFF1",width:"100%",height:"100%"}},Y={style:{"font-size":"40px"}},Z={style:{"white-space":"pre-line"}},G={class:"d-flex justify-space-between align-center"},H={class:"price-text"},J=K(()=>i("h1",{class:"text-white"},"已下架",-1)),L={__name:"ProductView",setup(l){const _=w(),n=x(),v=S(),f=$({quantity:z().typeError("缺少數量").required("缺少數量").min(1,"最少為 1")}),{isSubmitting:y,handleSubmit:h}=A({validationSchema:f,initialValues:{quantity:0}}),c=D("quantity"),g=h(async t=>{try{const{data:o}=await C.post("/users/cart",{product:e.value._id,quantity:t.quantity});v.cart=o.result}catch(o){n({text:o.response.data.message,showCloseButton:!1,snackbarProps:{timeout:2e3,color:"red",location:"bottom"}})}}),e=F({_id:"",name:"",price:0,description:"",image:"",sell:!0,category:""});return(async()=>{try{const{data:t}=await k.get("/products/"+_.params.id);e.value._id=t.result._id,e.value.name=t.result.name,e.value.price=t.result.price,e.value.description=t.result.description,e.value.image=t.result.image,e.value.sell=t.result.sell,e.value.category=t.result.category,document.title="購物網 | "+e.value.name}catch(t){n({text:t.response.data.message,showCloseButton:!1,snackbarProps:{timeout:2e3,color:"red",location:"bottom"}})}})(),(t,o)=>(q(),B("div",O,[a(R,{style:{"padding-top":"100px"},id:"ProductviewContainer"},{default:s(()=>[a(T,null,{default:s(()=>[a(p,{cols:"12",md:"6",class:"d-flex justify-center"},{default:s(()=>[a(P,{src:e.value.image,width:"100%",height:"100%",class:"img"},null,8,["src"])]),_:1}),a(p,{cols:"12",md:"6"},{default:s(()=>[a(U,{disabled:r(y),onSubmit:I(r(g),["prevent"]),class:"d-flex flex-column justify-space-between"},{default:s(()=>[i("h1",Y,u(e.value.name),1),i("pre",Z,u(e.value.description),1),a(j,{modelValue:r(c).value.value,"onUpdate:modelValue":o[0]||(o[0]=b=>r(c).value.value=b),modelModifiers:{number:!0},type:"number",min:"1",variant:"outlined",density:"compact","error-messages":r(c).errorMessage.value,style:{width:"6rem","margin-top":"1rem"},"bg-color":"#E1F5FE"},null,8,["modelValue","error-messages"]),i("div",G,[i("p",H,"$"+u(e.value.price),1),a(d,{color:"primary",variant:"elevated",height:"45",class:"btn-cart",type:"submit"},{default:s(()=>[m("加入購物車")]),_:1})])]),_:1},8,["disabled","onSubmit"])]),_:1})]),_:1})]),_:1}),a(E,{"model-value":!e.value.sell,persistent:"",class:"align-center text-center justify-center"},{default:s(()=>[J,a(d,{to:"/"},{default:s(()=>[m("回上頁")]),_:1})]),_:1},8,["model-value"])]))}},oe=V(L,[["__scopeId","data-v-31aeaef1"]]);export{oe as default};
